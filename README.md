## Работа приложения
Приложение содержит в себе страницы, находящиеся в директории `src/pages`, т.е. `index.tsx` и `films/[id].tsx`, которые отвечают маршрутам `/` и `/film/$id`. Страница конкретного фильма содержит в себе параметр id и является динамическим маршрутом (id в URL зависит от id фильма). 

В этой же директории находятся файлы `_app.ts` (он нужен для переопределения функции App - в нашем случае мы оборачиваем приложение в провайдер QueryClientProvider из библиотеки `react-query`, чтобы иметь доступ к контексту библиотеки, а также задаём странице название и иконку и импортируем глобальный стиль) и `_document.tsx` (он определяет какой-то общий код для всех страниц).

Каждая страница содержит в себе компоненты, импортируемые из директории `components`. Компоненты стилизуются при помощи технологии Styled Components, когда мы определяем какой-то компонент и стилизуем для него один из html-тегов  в следующем формате: 
```bash
export const Container = styled.div`
    padding: 0 5% 0 5%;
`
```

### Подробно про работу каждой страницы
#### Каталог фильмов
Содержит в себе массив `genres`, отвечающий за отображаемые жанры на сайте (можно в коде добавить или убрать какой-то элемент по желанию, главное, чтобы такой жанр существовал в api). Из компонентов содержит в себе `Header` и `FilmList`, при этом компонент `FilmList` выводится при помощи метода `map`, который перебирает массив жанров и возвращает для каждого жанра свой отображаемый список.
#### Страница фильма
Содержит компоненты `FilmCard` и `CommentList` (их работа описана ниже в разделе Файловая структура/Директория src/Components).

## Файловая структура

### Директория src
Директория `src` отвечает за:
- код компонентов (директория components);
- код страниц (директория pages, принцип работы описан в начале в разделе Работа приложения);
- код кастомных хуков (директория hooks);
- код взаимодействия с api (директория lib);
- глобальный стиль (директория styles);

#### components - компоненты
В директории `common` прописаны компоненты, используемые в других компонентах:
- `Loader` - просто блок с иконкой и текстом, отображается при ожидании данных с api;
- `Pagination` - компонент для управления постраничным выводом, при этом выбранные страницы сохраняем в localStorage:
```bash
localStorage.setItem(
  `${props.genre}_page`,
  String(element)
)
```

В директории `providers` прописан провайдер, в который оборачивается приложение.

В директории `ui` содержатся компоненты, используемые на страницах в директории `pages`:
- `CommentList` - компонент, отвечающий за создание и отображение комментариев, содержит в себе инпут для ввода коммента, кнопку создания коммента (можно также юзать 'Enter') и список комментариев с возможностью удаления. Значение в инпуте управляется с помощью ```bash const [comment, setComment] = useState('')```, где comment - это текстовое значение, а setComment - функция управления этим значением. Список комментариев выводится мапом - перебираем массив comments, на каждый коммент рисуем элемент. За удаление комментария отвечает этот код:
```bash
onClick={() =>
  setComments(
    comments.filter(
       (comment) => comment.id !== id
    )
  )
}
```
- FilmCard - карточка фильма с названием, фото и описанием - вытягивает id из URL-параметров (router.query.id), посылает запрос на бек в `useFilmRetrieve`, в процессе загрузки данных отображает `<Loader />`, затем уже отрисовываем верстку с полученными данными. Есть функция обрезки слишком длинного описания `descriptionSlice`, если описания нет, то отображаем `NO SUMMARY PROVIDED`.
- FilmList - список фильмов по жанру - в пропсах принимает `genre`, этот жанр вместе с параметрами пагинации передаёт в запрос на бек в `useFilmList`, в процессе загрузки данных отображает `<Loader />, затем уже выводит список полученных фильмов с помощью map. Каждый фильм обернут в ссылку для перехода на его страницу.
- Header - просто шапка сайта с названием.

#### hooks - кастомные хуки
Содержит в себе кастомный хку useWindowSize, определяющий ширину и выосту экрана.
#### lib - взаимодействие с api
Содержит в себе axios-инстанс, в котором прописывается основа URL для запросов к серверу, а также директории `api` и `hooks`. 

В `api` прописан тип получаемых данных и запросы:
- filmListQuery для получения списка фильмов по жанру, и странице;
- filmRetrieveQuery для получения конкретного фильма по id.

В `hooks` хуки с использованием метода useQuery из библиотеки `react-query` для проведения запросов к серверу:
- useFilmList для получения списка фильмов (использует запрос filmListQuery из `./api`;
- useFilmRetrieve для получения фильма по id (использует запрос filmRetrieveQuery из `./api`

### Директория public
Директория `public` хранит в себе иконку сайта.

### Файлы в корневой директории:
`package.json` - файл со списком зависимостей проекта;

`.prettierrc.json` и `.prettierignore` - файлы для инструмента форматирования кода prettier, в которых прописывается конфигурация и файлы, которые не следует форматировать;

`tsconfig.json` - файл, в котором прописывается конфигурация TypeScript;
